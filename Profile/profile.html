<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile & Setting</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="profile.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="mobile-container profile-page">
        <!-- Header -->
        <header class="profile-header">
            <a href="../index.html" class="back-btn"><i class="fa-solid fa-arrow-left"></i></a>
            <h1>Profile & Setting</h1>
            <div class="header-spacer"></div>
        </header>

        <div class="content-scroll">
            <!-- Profile Card -->
            <div class="profile-card">
                <div class="profile-info">
                    <div class="profile-avatar">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ48cPDA1CJ-sUjTt1Q0GfGMcuiqZvA8QfPSaPYPohKEOs5ejIqtptfaRIAsLemP_RqU4Us9yptWcK3e70N1YW6FB8_dffyywH2Ody508w&s=10" alt="Profile Avatar">
                    </div>
                    <div class="profile-text">
                        <h2>Judy Hopps</h2>
                        <p>judy.hopps@zpd.gov</p>
                    </div>
                </div>
                <button class="edit-profile-btn" onclick="openEditProfileModal()">
                    <i class="fa-regular fa-pen-to-square"></i>
                </button>
            </div>

            <!-- Account Section -->
            <div class="settings-section">
                <h3>Account</h3>
                <div class="settings-list">
                    <a href="#" class="setting-item">
                        <div class="setting-left">
                            <div class="setting-icon"><i class="fa-solid fa-clock-rotate-left"></i></div>
                            <span>My Activity Log</span>
                        </div>
                        <i class="fa-solid fa-chevron-right arrow-icon"></i>
                    </a>
                    <a href="#" class="setting-item" onclick="openChangePasswordModal()">
                        <div class="setting-left">
                            <div class="setting-icon"><i class="fa-solid fa-lock"></i></div>
                            <span>Change Password</span>
                        </div>
                        <i class="fa-solid fa-chevron-right arrow-icon"></i>
                    </a>
                    <div class="setting-item">
                        <div class="setting-left">
                            <div class="setting-icon"><i class="fa-regular fa-bell"></i></div>
                            <span>Notifications</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Appearance Section -->
            <div class="settings-section">
                <h3>Appearance</h3>
                <div class="settings-list">
                    <a href="#" class="setting-item">
                        <div class="setting-left">
                            <div class="setting-icon"><i class="fa-regular fa-sun"></i></div>
                            <span>Themes</span>
                        </div>
                        <i class="fa-solid fa-chevron-right arrow-icon"></i>
                    </a>
                </div>
            </div>

            <!-- Support Section -->
            <div class="settings-section">
                <h3>Support</h3>
                <div class="settings-list">
                    <a href="#" class="setting-item">
                        <div class="setting-left">
                            <div class="setting-icon"><i class="fa-regular fa-circle-question"></i></div>
                            <span>Help/Support</span>
                        </div>
                        <i class="fa-solid fa-chevron-right arrow-icon"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- Edit Profile Modal -->
        <div id="edit-profile-modal" class="modal-overlay">
            <div class="modal-bottom-sheet">
                <div class="modal-header">
                    <h3>Edit Profile</h3>
                    <button class="modal-close-btn" onclick="closeEditProfileModal()">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="edit-name">Full Name</label>
                        <input type="text" id="edit-name" value="Judy Hopps">
                    </div>
                    <div class="form-group">
                        <label for="edit-email">Email</label>
                        <input type="email" id="edit-email" value="judy.hopps@zpd.gov">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-cancel" onclick="closeEditProfileModal()">Cancel</button>
                    <button class="btn-save" onclick="saveProfile()">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- Change Password Modal -->
        <div id="change-password-modal" class="modal-overlay">
            <div class="modal-bottom-sheet">
                <div class="modal-header">
                    <h3>Change Password</h3>
                    <button class="modal-close-btn" onclick="closeChangePasswordModal()">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="current-password">Current Password</label>
                        <input type="password" id="current-password" placeholder="Enter current password">
                    </div>
                    <div class="form-group">
                        <label for="new-password">New Password</label>
                        <input type="password" id="new-password" placeholder="Enter new password">
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm New Password</label>
                        <input type="password" id="confirm-password" placeholder="Confirm new password">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-cancel" onclick="closeChangePasswordModal()">Cancel</button>
                    <button class="btn-save" onclick="savePassword()">Update Password</button>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="success-modal" class="modal-overlay">
            <div class="modal-bottom-sheet">
                <div class="modal-body text-center">
                    <div class="success-icon">
                        <i class="fa-solid fa-check"></i>
                    </div>
                    <h3 style="margin-bottom: 8px;">Success!</h3>
                    <p style="color: var(--text-gray); margin-bottom: 24px;">Your password has been changed successfully.</p>
                    <button class="btn-save" style="width: 100%;" onclick="closeSuccessModal()">OK</button>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="../index.html" class="nav-item">
                <i class="fa-solid fa-house"></i>
            </a>
            <a href="../Dashboard/dashboard.html" class="nav-item">
                <i class="fa-solid fa-chart-pie"></i>
            </a>
            <a href="../Buddies/buddies.html" class="nav-item">
                <i class="fa-solid fa-user-group"></i>
            </a>
            <a href="../ToDo/todo.html" class="nav-item">
                <i class="fa-solid fa-list-check"></i>
            </a>
            <a href="#" class="nav-item active">
                <i class="fa-regular fa-user"></i>
                <span>Profile</span>
            </a>
        </nav>
    </div>
    
    <script>
        // Edit Profile Modal Logic
        const editProfileModal = document.getElementById('edit-profile-modal');
        const nameInput = document.getElementById('edit-name');
        const emailInput = document.getElementById('edit-email');
        
        // Elements to update
        const profileName = document.querySelector('.profile-text h2');
        const profileEmail = document.querySelector('.profile-text p');

        function openEditProfileModal() {
            // Pre-fill with current values
            if (profileName) nameInput.value = profileName.textContent;
            if (profileEmail) emailInput.value = profileEmail.textContent;
            
            editProfileModal.classList.add('active');
        }

        function closeEditProfileModal() {
            editProfileModal.classList.remove('active');
        }

        function saveProfile() {
            // Update UI
            if (profileName) profileName.textContent = nameInput.value;
            if (profileEmail) profileEmail.textContent = emailInput.value;
            
            closeEditProfileModal();
        }

        // Close modal if clicking outside content
        editProfileModal.addEventListener('click', (e) => {
            if (e.target === editProfileModal) {
                closeEditProfileModal();
            }
        });

        // Change Password Modal Logic
        const changePasswordModal = document.getElementById('change-password-modal');
        const currentPasswordInput = document.getElementById('current-password');
        const newPasswordInput = document.getElementById('new-password');
        const confirmPasswordInput = document.getElementById('confirm-password');
        const successModal = document.getElementById('success-modal');

        function openChangePasswordModal() {
            // Clear inputs
            currentPasswordInput.value = '';
            newPasswordInput.value = '';
            confirmPasswordInput.value = '';
            changePasswordModal.classList.add('active');
        }

        function closeChangePasswordModal() {
            changePasswordModal.classList.remove('active');
        }

        function closeSuccessModal() {
            successModal.classList.remove('active');
        }

        function savePassword() {
            const current = currentPasswordInput.value;
            const newPass = newPasswordInput.value;
            const confirmPass = confirmPasswordInput.value;

            if (!current || !newPass || !confirmPass) {
                alert('Please fill in all fields');
                return;
            }

            if (newPass !== confirmPass) {
                alert('New passwords do not match');
                return;
            }

            // In a real app, you would send an API request here
            closeChangePasswordModal();
            successModal.classList.add('active');
        }

        // Close modal if clicking outside content
        changePasswordModal.addEventListener('click', (e) => {
            if (e.target === changePasswordModal) {
                closeChangePasswordModal();
            }
        });
        
        successModal.addEventListener('click', (e) => {
            if (e.target === successModal) {
                closeSuccessModal();
            }
        });
    </script>
</body>
</html>